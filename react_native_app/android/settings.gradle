pluginManagement {
    repositories {
        gradlePluginPortal()
        google()
        mavenCentral()
        // Indispensable pour que le script trouve ses dÃ©pendances
        maven { url 'https://storage.googleapis.com/download.flutter.io' }
    }
    includeBuild("../node_modules/@react-native/gradle-plugin")
}

plugins { id("com.facebook.react.settings") }
extensions.configure(com.facebook.react.ReactSettingsExtension){ ex -> ex.autolinkLibrariesFromCommand() }

rootProject.name = 'rn_host_app'

// =========================================================
// ðŸŸ¢ CONFIGURATION FLUTTER (OFFICIELLE & CORRIGÃ‰E)
// =========================================================

// 1. On dÃ©finit le chemin
def flutterProjectDir = new File(settingsDir, '../../flutter_profile_sdk')

// 2. LE FIX : On utilise le nom complet de la classe pour Ã©viter l'erreur
setBinding(new groovy.lang.Binding([gradle: this]))

// 3. On lance le script officiel (qui va gÃ©rer les plugins tout seul !)
evaluate(new File(flutterProjectDir, '.android/include_flutter.groovy'))

// React Native
include ':app'
includeBuild('../node_modules/@react-native/gradle-plugin')